flowchart TD
  A[사용자] -->|클릭| B[프론트: /login 소셜 버튼]
  B -->|302 Redirect| C[/api/auth/google 또는 /api/auth/kakao]
  C --> D[제공자 로그인/동의 화면]
  D -->|Redirect (code)| E[/api/auth/*/callback]
  E --> F[Passport Strategy\n(GoogleStrategy/KakaoStrategy)]
  F --> G[AuthService.oauthLogin]
  G --> H[Prisma: 사용자 find-or-create\n+ isEmailVerified=true]
  H --> I[JWT 발급]
  I --> J[httpOnly accessToken 쿠키 설정]
  J --> K[FRONTEND_URL 로 302 리다이렉트]
  K --> L[프론트 초기화]
  L -->|선택| M[/api/auth/verify 호출로 사용자 가져오기]
  M --> N[UI 상태 갱신(isLoggedIn, user)]
  L -->|선택| O[localStorage에 토큰 복사→ 소켓 인증에 사용]
